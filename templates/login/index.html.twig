{% extends 'base.html.twig' %}

{% block title %}Connexion - Vite & Gourmand{% endblock %}

{% block body %}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">

            {# Card de connexion #}
            <div class="login-card">

                {# En-tête avec logo #}
                <div class="text-center mb-4">
                    <div class="login-icon mb-3">
                        <i data-feather="user-check" width="48" height="48"></i>
                    </div>
                    <h1 class="h3 fw-bold mb-2" style="color: var(--primary);">Bienvenue</h1>
                    <p class="text-muted">Connectez-vous à votre compte</p>
                </div>

                {# Affichage des erreurs #}
                {% if error %}
                    <div class="alert alert-danger d-flex align-items-center mb-4" role="alert">
                        <i data-feather="alert-circle" width="20" class="me-2"></i>
                        <div>
                            {{ error.messageKey|trans(error.messageData, 'security') }}
                        </div>
                    </div>
                {% endif %}

                {# Formulaire de connexion #}
                <form action="{{ path('app_login') }}" method="post">

                    <div class="form-floating mb-3">
                        <input class="form-control"
                               type="email"
                               id="username"
                               name="_username"
                               value="{{ last_username }}"
                               placeholder="nom@exemple.com"
                               required
                               autofocus>
                        <label for="username">
                            <i data-feather="mail" width="16" class="me-1"></i>
                            Adresse email
                        </label>
                    </div>

                    <div class="form-floating mb-3">
                        <input class="form-control"
                               type="password"
                               id="password"
                               name="_password"
                               placeholder="Mot de passe"
                               required>
                        <label for="password">
                            <i data-feather="lock" width="16" class="me-1"></i>
                            Mot de passe
                        </label>
                    </div>

                    {# Mot de passe oublié #}
                    <div class="d-flex justify-content-end mb-4">
                        <a href="{{ path('app_password_reset_request') }}" class="text-decoration-none small" style="color: var(--primary);">
                            Mot de passe oublié ?
                        </a>
                    </div>

                    <input type="hidden" name="_target_path" value="{{ path('app_account') }}">

                    <button class="btn btn-primary w-100 py-3 mb-3" type="submit">
                        <i data-feather="log-in" width="18" class="me-2"></i>
                        Se connecter
                    </button>
                </form>

                {# Divider #}
                <div class="divider my-4">
                    <span class="divider-text">ou</span>
                </div>

                {# Lien inscription #}
                <div class="text-center">
                    <p class="mb-0 text-muted">
                        Vous n'avez pas de compte ?
                        <a href="{{ path('app_register') }}" class="fw-bold text-decoration-none" style="color: var(--secondary);">
                            Créer un compte
                        </a>
                    </p>
                </div>

            </div>

        </div>
    </div>
</div>

{% endblock %}
